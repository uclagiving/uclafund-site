var sowb=window.sowb||{};sowb.SiteOriginSlider=function(e){return{playSlideVideo:function(i){e(i).find("video").each((function(){void 0!==this.play&&this.play()}));var t=e(i).find("iframe");t.length&&(t[0].contentWindow.postMessage('{"method":"play"}',"*"),t[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"))},pauseSlideVideo:function(i){e(i).find("video").each((function(){void 0!==this.pause&&this.pause()}));var t=e(i).find("iframe");t.length&&(t[0].contentWindow.postMessage('{"method":"pause"}',"*"),t[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"))},setupActiveSlide:function(i,t,s){var n=e(i).find(".cycle-sentinel"),a=e(t),o=a.find("video.sow-background-element"),d=e(i).prev();if(void 0===s?n.css("height",a.outerHeight()+"px"):n.animate({height:a.outerHeight()},s),d.length){var l;e(i).find(".sow-slider-image > video").prop("muted",!0);var r=e(i).find(".sow-slide-video-oembed iframe");if((l=r.length?r:a.find("> video")).length){d.clearQueue().fadeIn(s);var c=d.siblings(".sow-slider-images").data("settings");l.hasClass("sow-player-unmuted")?(r.length?r.contentWindow.postMessage('{"event":"command","func":"unMute","args":""}',"*"):l.prop("muted",!1),d.addClass("sow-player-unmuted"),d.attr("aria-label",c.muteLoc)):(d.removeClass("sow-player-unmuted"),d.attr("aria-label",c.unmuteLoc))}else d.clearQueue().fadeOut(s)}o.length&&(a.outerWidth()/a.outerHeight()>o.outerWidth()/o.outerHeight()?o.css({width:"100%",height:"auto"}):o.css({width:"auto",height:"100%"}),o.css({"margin-left":-Math.ceil(o.width()/2),"margin-top":-Math.ceil(o.height()/2)}))}}},jQuery((function(e){sowb.setupSliders=sowb.setupSlider=function(){var i=new sowb.SiteOriginSlider(e);e(".sow-slider-images").each((function(){var t=e(this);if(t.data("initialized"))return t;var s=t.siblings(".sow-slider-pagination"),n=t.closest(".sow-slider-base"),a=n.find(".sow-slide-nav"),o=t.find(".sow-slider-image"),d=t.data("settings");d.breakpoint&&e(window).on("load resize",(function(){window.matchMedia("(max-width: "+d.breakpoint+")").matches?n.addClass("sow-slider-is-mobile"):n.removeClass("sow-slider-is-mobile")})),o.each((function(i,t){var s=e(t),n=s.data("url");void 0!==n&&n.hasOwnProperty("url")&&(s.on("click",(function(e){e.preventDefault(),window.open(n.url,n.hasOwnProperty("new_window")&&n.new_window?"_blank":"_self").opener=null})),s.find("a").on("click",(function(e){e.stopPropagation()})))}));var l=function(){var r=t.closest(".so-widget-fittext-wrapper");if(r.length>0&&!r.data("fitTextDone"))r.on("fitTextDone",(function(){l()}));else{var c=t.find(".sow-slider-image-parallax[data-siteorigin-parallax]").length,u=!1;if(!c){var w=t.find(".sow-slider-image-parallax:not([data-siteorigin-parallax])");!w.length||"undefined"==typeof parallaxStyles||parallaxStyles["disable-parallax-mobile"]&&window.matchMedia("(max-width: "+parallaxStyles["mobile-breakpoint"]+")").matches||(u=!0,n.css("opacity",0))}n.show();var f=function(){t.find(".sow-slider-image").each((function(){var i=e(this);i.css("height",i.find(".sow-slider-image-wrapper").outerHeight()+"px")}))};if(e(window).on("resize panelsStretchRows",f).trigger("resize"),e(sowb).on("setup_widgets",f),!c&&u){if(!w.find(".simpleParallax").length)return void setTimeout(l,50);window.dispatchEvent(new Event("resize")),setTimeout((function(){n.css("opacity",1)}),425)}if(t.trigger("slider_setup_before"),t.on({"cycle-after":function(t,s,n,a,o){var d=e(this);i.playSlideVideo(a),i.setupActiveSlide(d,a),e(a).trigger("sowSlideCycleAfter")},"cycle-before":function(t,n,a,o,d){var l=e(this);s.find("> li").removeClass("sow-active").eq(n.slideNum-1).addClass("sow-active"),i.pauseSlideVideo(a),i.setupActiveSlide(l,o,n.speed),e(o).trigger("sowSlideCycleBefore")},"cycle-initialized":function(n,o){i.playSlideVideo(e(this).find(".cycle-slide-active")),i.setupActiveSlide(t,o.slides[0]),s.find(">li").removeClass("sow-active").eq(0).addClass("sow-active"),e(this).find(".cycle-slide-active").trigger("sowSlideInitial"),o.slideCount<=1&&(s.hide(),a.hide()),e(window).trigger("resize"),setTimeout((function(){f(),i.setupActiveSlide(t,o.slides[0]),t.find(".cycle-sentinel").empty()}),200)}}).cycle({slides:"> .sow-slider-image",speed:d.speed,timeout:d.timeout,swipe:d.swipe,paused:d.paused,pauseOnHover:d.pause_on_hover,"swipe-fx":"scrollHorz",log:!1}),t.find("video.sow-background-element").on("loadeddata",(function(){i.setupActiveSlide(t,t.find(".cycle-slide-active"))})),s.add(a).hide(),o.length>1)if(n.hasClass("sow-slider-is-mobile"))d.nav_always_show_mobile&&window.matchMedia("(max-width: "+d.breakpoint+")").matches&&(s.show(),a.show());else if(d.nav_always_show_desktop&&window.matchMedia("(min-width: "+d.breakpoint+")").matches)s.show(),a.show();else{var p=!1;n.on("mouseenter",(function(){s.add(a).clearQueue().fadeIn(150),p=!1})).on("mouseleave",(function(){p=!0,setTimeout((function(){p&&s.add(a).clearQueue().fadeOut(150),p=!1}),750)}))}var h=function(){i.setupActiveSlide(t,t.find(".cycle-slide-active"))};e(window).on("resize",h),e(sowb).on("setup_widgets",h),s.find("> li > a").on("click",(function(i){i.preventDefault(),t.cycle("goto",e(this).data("goto"))})),a.find("> a").on("click",(function(i){i.preventDefault(),t.cycle(e(this).data("action"))})),n.on("keyup",(function(e){37===e.which?t.cycle("prev"):39===e.which&&t.cycle("next"),n.trigger("focus")})),d.unmute&&n.find(".sow-player-controls-sound").on("click",(function(){var i,t=e(this),s=t.next().find(".cycle-slide-active .sow-slide-video-oembed iframe");i=s.length?s:t.next().find(".cycle-slide-active > video"),t.hasClass("sow-player-unmuted")?(t.removeClass("sow-player-unmuted"),i.removeClass("sow-player-muted"),t.attr("aria-label",d.unmuteLoc),s.length?s[0].contentWindow.postMessage('{"event":"command","func":"mute","args":""}',"*"):i.prop("muted",!0)):(t.addClass("sow-player-unmuted"),i.addClass("sow-player-unmuted"),t.attr("aria-label",d.muteLoc),s.length?s[0].contentWindow.postMessage('{"event":"command","func":"unMute","args":""}',"*"):i.prop("muted",!1))}))}};t.trigger("slider_setup_after");var r=t.find("img.sow-slider-background-image, img.sow-slider-foreground-image"),c=0,u=!1;r.each((function(){e(this);this.complete?c++:e(this).one("load",(function(){++c!==r.length||u||(l(),u=!0)})).attr("src",e(this).attr("src")),c!==r.length||u||(l(),u=!0)})),0===r.length&&l(),e.isFunction(e.fn.fitVids)&&t.find(".sow-slide-video-oembed").fitVids(),t.data("initialized",!0)}))},sowb.setupSliders(),e(sowb).on("setup_widgets",sowb.setupSliders)})),window.sowb=sowb;