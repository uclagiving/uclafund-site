var sowb=window.sowb||{};jQuery((function(s){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;sowb.setupCarousel=function(){s.fn.setSlideTo=function(e){$item=s(this);var i=$item.slick("slickGetOption","slidesToShow"),o=$item.slick("slickGetOption","slidesToScroll");$item.slick("slickSetOption","slidesToShow",1),$item.slick("slickSetOption","slidesToScroll",1),$item.slick("slickGoTo",e),$item.slick("slickSetOption","slidesToShow",i),$item.slick("slickSetOption","slidesToScroll",o)},s(".sow-carousel-wrapper").on("init",(function(e,i){s(this).css("opacity",1)})),s(".sow-carousel-wrapper").each((function(){var i=s(this),o=i.find(".sow-carousel-items"),t=i.data("responsive"),l=i.data("carousel_settings");e&&(l.animation_speed=0);const a=s("body").hasClass("block-editor-page"),d=l.autoplay_continuous_scroll&&l.autoplay;if(o.not(".slick-initialized").slick({arrows:!1,dots:l.dots,appendDots:l.appendDots?i.find(".sow-carousel-nav"):i,rows:0,rtl:"rtl"==i.data("dir"),touchThreshold:20,infinite:l.loop&&(!i.data("ajax-url")||i.data("ajax-url")&&d),variableWidth:i.data("variable_width"),accessibility:!1,adaptiveHeight:l.adaptive_height,cssEase:l.animation,speed:l.animation_speed,slidesToScroll:t.desktop_slides_to_scroll,slidesToShow:void 0===t.desktop_slides_to_show?t.desktop_slides_to_scroll:t.desktop_slides_to_show,responsive:[{breakpoint:t.tablet_portrait_breakpoint,settings:{slidesToScroll:t.tablet_portrait_slides_to_scroll,slidesToShow:void 0===t.tablet_portrait_slides_to_show?t.tablet_portrait_slides_to_scroll:t.tablet_portrait_slides_to_show}},{breakpoint:t.mobile_breakpoint,settings:{slidesToScroll:t.mobile_slides_to_scroll,slidesToShow:void 0===t.mobile_slides_to_show?t.mobile_slides_to_scroll:t.mobile_slides_to_show}}],autoplay:!a&&d,autoplaySpeed:0}),l.item_overflow&&(o.css("width",""),o.css("opacity","")),o.on("swipe",(function(s,e,o){i.parent().parent().find(".sow-carousel-"+("left"==o?"next":"prev")).trigger("touchend")})),l.autoplay){var c=!1;if(a||d)return;setInterval((function(){c||r(!0,!1)}),l.autoplaySpeed),l.pauseOnHover&&(o.on("mouseenter.slick",(function(){c=!0})),o.on("mouseleave.slick",(function(){c=!1})))}var r=function(e,o){const t=i.find(".sow-carousel-items"),a=i.parent().parent(),d=t.slick("slickCurrentSlide"),c=t.find(".sow-carousel-item").length,r=c>=i.data("item_count"),n=Math.floor(t.outerWidth()/t.find(".sow-carousel-item").outerWidth(!0));let u=t.slick("slickGetOption","slidesToScroll"),p=c-n,k=i.data("fetching"),w=i.data("preloaded"),_=!1;if(r||w||!(d+n>=c-1||d+2*u>p)||(_=!0),!i.data("carousel_settings").loop){const s="ltr"==i.data("dir")?"previous":"next";0==d?a.find(".sow-carousel-"+s).removeClass("sow-carousel-disabled").removeAttr("aria-disabled"):e||d-u!=0||a.find(".sow-carousel-"+s).addClass("sow-carousel-disabled").attr("aria-disabled","true")}if(e){if(k&&!w)return;r&&d>=p?i.data("carousel_settings").loop&&t.slick("slickGoTo",0):"post"==i.data("widget")&&"undefined"==i.data("carousel_settings").theme&&u>=n?(t.slick("slickSetOption","slidesToShow",n),t.slick("slickSetOption","slidesToScroll",n),t.slick("slickNext")):d+u>p?t.setSlideTo(p):d%u!=0?(t.slick("slickSetOption","slidesToScroll",u+1),t.slick("slickNext"),t.slick("slickSetOption","slidesToScroll",u)):t.slick("slickNext"),d!=p||i.data("carousel_settings").loop||a.find(".sow-carousel-next").addClass("sow-carousel-disabled").attr("aria-disabled","true")}else{let s=!1;if("post"===i.data("widget")?i.data("carousel_settings").loop&&0===d?(p=r?c:c-1,_=!r,t.slick("slickGoTo",p)):d<=u?t.slick("slickGoTo",0):s=!0:s=!0,s){t.slick("slickPrev");const s=a.find(".sow-carousel-next");s.hasClass("sow-carousel-disabled")&&s.removeClass("sow-carousel-disabled").removeAttr("aria-disabled")}}l.dots&&"post"==i.data("widget")&&(i.find("li.slick-active").removeClass("slick-active"),i.find(".slick-dots li").eq(Math.ceil(i.find(".sow-carousel-items").slick("slickCurrentSlide")/u)).addClass("slick-active")),_&&s(sowb).trigger("carousel_load_new_items",[i,t,o])};if(!l.loop&&0==o.slick("slickCurrentSlide")){const s="ltr"==i.data("dir")?"previous":"next";i.parent().parent().find(".sow-carousel-"+s).addClass("sow-carousel-disabled").attr("aria-disabled","true")}if(i.parent().parent().find(".sow-carousel-previous, .sow-carousel-next").on("click touchend",(function(e,i){e.preventDefault(),s(this).hasClass("sow-carousel-disabled")||r(s(this).hasClass("sow-carousel-next"),i)})),l.dots&&(i.data("variable_width")||i.data("carousel_settings").theme)){i.find(".slick-dots li").off("click.slick");var n=function(){o=i.find(".sow-carousel-items");var e=s(this).index(),t=o.slick("slickGetOption","slidesToScroll"),l=o.find(".sow-carousel-item").length,a=Math.ceil(o.outerWidth()/o.find(".sow-carousel-item").outerWidth(!0)),d=l-a;(e+a>=l?(o.slick("slickGoTo",d),$dots=s(this).parent(),$dots.find(".slick-active").removeClass("slick-active"),$dots.children().eq(e).addClass("slick-active")):("post"==i.data("widget")&&(e=Math.ceil(s(this).index()*t)),o.slick("slickGoTo",e)),"post"==i.data("widget"))&&(l>=i.data("item_count")||(o.slick("slickCurrentSlide")+a>=l-1||o.slick("slickCurrentSlide")+t>d)&&s(sowb).trigger("carousel_load_new_items",[i,o,!1]))};i.find(".slick-dots li").on("click touchend",n),s(sowb).on("carousel_posts_added",(function(){i.find(".slick-dots li").on("click touchend",n)}))}})),s(sowb).trigger("carousel_setup"),s(document).on("keydown",".sow-carousel-navigation a",(function(e){13!=e.keyCode&&32!=e.keyCode||(e.preventDefault(),s(this).trigger("click"))})),s(document).on("keyup",".sow-carousel-item",(function(e){if(13==e.keyCode&&s(this).find("h3 a")[0].click(),37==e.keyCode||39==e.keyCode){var i=s(this).parents(".sow-carousel-wrapper"),o=i.find(".sow-carousel-items"),t=o.find(".sow-carousel-item").length,l=s(this).data("slick-index"),a=t-(t===i.data("item_count")?0:1);if(37==e.keyCode)--l<0&&(l=a);else if(39==e.keyCode&&++l>=a){if(i.data("fetching"))return;i.parent().find(".sow-carousel-next").trigger("click",!0)}o.slick("slickGoTo",l,!0),i.find(".sow-carousel-item").prop("tabindex",-1),i.find('.sow-carousel-item[data-slick-index="'+l+'"]').trigger("focus").prop("tabindex",0)}}));var i=function(){s(".sow-carousel-wrapper").each((function(){var e=s(this),i=e.find(".sow-carousel-items.slick-initialized"),o=e.data("responsive");window.matchMedia("(min-width: "+o.tablet_portrait_breakpoint+"px) and (max-width: "+o.tablet_landscape_breakpoint+"px) and (orientation: landscape)").matches&&(i.slick("slickSetOption","slidesToShow",o.tablet_landscape_slides_to_show),i.slick("slickSetOption","slidesToScroll",o.tablet_landscape_slides_to_scroll))})),s(".sow-carousel-item:first-of-type").prop("tabindex",0)};i(),s(window).on("resize load",i)},sowb.setupCarousel(),s(sowb).on("setup_widgets",sowb.setupCarousel)})),window.sowb=sowb;