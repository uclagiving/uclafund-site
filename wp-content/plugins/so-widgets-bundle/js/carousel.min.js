var sowb=window.sowb||{};jQuery((function(e){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;e.fn.fixContainerHeight=function(){const t=e(this),i=t.height(),s=t.find(".sow-carousel-item");if(!s.length)return;let o=0;s.each((function(){const t=e(this).outerHeight();t>o&&(o=t)}));const a=parseFloat(s.first().css("margin-bottom")),l=o+a;Math.abs(i-l)>1&&t.css("height",l)},e.fn.navigateToSlide=function(t){const i=e(this);null!==t&&("string"==typeof t?i.slick(t):i.slick("slickGoTo",t-1)),i.adaptiveHeight()};let i=!0;e.fn.adaptiveHeight=function(){const t=e(this);if(!t.data("adaptive_height"))return;const s=t.find(".slick-active");s.css("height","fit-content");let o=0;s.each((function(){const t=e(this).outerHeight();t>o&&(o=t)}));const a=parseFloat(s.first().css("margin-bottom"));$slickList=t.find(".slick-list"),$slickList.hasClass("sow-loaded")?$slickList.animate({height:o+a},t.data("adaptive_height")||150):($slickList.css("height",o+a),i&&setTimeout((function(){$slickList.addClass("sow-loaded"),i=!1}),150)),s.css("height",o)},e.fn.carouselDotNavigation=function(t){const i=e(this),o=i.find(".sow-carousel-items"),a=o.slick("slickGetOption","slidesToScroll"),l=o.find(".sow-carousel-item").length,n=Math.ceil(o.outerWidth()/o.find(".sow-carousel-item").outerWidth(!0)),d=l-n;let c=e(t.currentTarget).index();if(c+n>=l?(o.navigateToSlide(d),$dots=i.parent(),$dots.find(".slick-active").removeClass("slick-active"),$dots.children().eq(c).addClass("slick-active")):("post"==i.data("widget")&&(c=Math.ceil(c+1*a)),o.navigateToSlide(c)),"post"==i.data("widget")){l>=i.data("item_count")||(o.slick("slickCurrentSlide")+n>=l-1||o.slick("slickCurrentSlide")+a>d)&&e(sowb).trigger("carousel_load_new_items",[i,o,!1])}s(o,i.data("carousel_settings"))};const s=(e,t)=>{e.data("adaptive_height")&&(e.adaptiveHeight(),"cards"!==t.theme||t.dynamic_navigation||e.fixContainerHeight())};sowb.setupCarousel=function(){e.fn.setSlideTo=function(t){$items=e(this);const i=$items.slick("slickGetOption","slidesToShow"),s=$items.slick("slickGetOption","slidesToScroll");$items.slick("slickSetOption","slidesToShow",1),$items.slick("slickSetOption","slidesToScroll",1),$items.navigateToSlide(t),$items.slick("slickSetOption","slidesToShow",i),$items.slick("slickSetOption","slidesToScroll",s)},e(".sow-carousel-wrapper").each((function(){var i=e(this),o=i.find(".sow-carousel-items"),a=i.data("responsive"),l=i.data("carousel_settings");t&&(l.animation_speed=0),o.data("adaptive_height",l.adaptive_height),o.data("animation_speed",l.animation_speed);const n=e("body").hasClass("block-editor-page"),d="continuous"===l.autoplay;if(o.on("init",(function(t,i){const s=e(this).closest(".sow-carousel-wrapper");setTimeout((function(){"cards"!==l.theme||l.dynamic_navigation||s.hasClass("fixed-navigation")||(s.addClass("fixed-navigation"),o.fixContainerHeight()),o.adaptiveHeight(),s.css("opacity",1)}),50)})),"cards"===l.theme&&i.closest(".widget_siteorigin-panels-builder").length){i.closest(".so-panel").parent().css("overflow","hidden")}if(o.not(".slick-initialized").slick({arrows:!1,dots:l.dots,appendDots:l.appendDots?i.find(".sow-carousel-nav"):i,rows:0,rtl:"rtl"==i.data("dir"),touchThreshold:20,infinite:l.loop&&(!i.data("ajax-url")||i.data("ajax-url")&&d),variableWidth:i.data("variable_width"),accessibility:!1,cssEase:l.animation,speed:l.animation_speed,slidesToScroll:a.desktop_slides_to_scroll,slidesToShow:void 0===a.desktop_slides_to_show?a.desktop_slides_to_scroll:a.desktop_slides_to_show,responsive:[{breakpoint:a.tablet_portrait_breakpoint,settings:{slidesToScroll:a.tablet_portrait_slides_to_scroll,slidesToShow:void 0===a.tablet_portrait_slides_to_show?a.tablet_portrait_slides_to_scroll:a.tablet_portrait_slides_to_show}},{breakpoint:a.mobile_breakpoint,settings:{slidesToScroll:a.mobile_slides_to_scroll,slidesToShow:void 0===a.mobile_slides_to_show?a.mobile_slides_to_scroll:a.mobile_slides_to_show}}],autoplay:!n&&d,autoplaySpeed:0}),l.item_overflow&&(o.css("width",""),o.css("opacity","")),o.on("swipe",(function(e,t,s){i.parent().parent().find(".sow-carousel-"+("left"==s?"next":"prev")).trigger("touchend")})),l.autoplay&&"off"!==l.autoplay){var c=!1;if(n||d)return;setInterval((function(){c||r(!0,!1)}),l.autoplaySpeed),l.pauseOnHover&&(o.on("mouseenter.slick",(function(){c=!0})),o.on("mouseleave.slick",(function(){c=!1})))}var r=function(t,s){const o=i.find(".sow-carousel-items"),a=i.parent().parent(),n=o.slick("slickCurrentSlide"),d=o.find(".sow-carousel-item").length,c=d>=i.data("item_count"),r=Math.floor(o.outerWidth()/o.find(".sow-carousel-item").outerWidth(!0));let u=o.slick("slickGetOption","slidesToScroll"),p=d-r,h=i.data("fetching"),_=i.data("preloaded"),w=!1;if(c||_||!(n+r>=d-1||n+2*u>p)||(w=!0),!i.data("carousel_settings").loop){const e="ltr"==i.data("dir")?"previous":"next";0==n?a.find(".sow-carousel-"+e).removeClass("sow-carousel-disabled").removeAttr("aria-disabled"):t||n-u!=0||a.find(".sow-carousel-"+e).addClass("sow-carousel-disabled").attr("aria-disabled","true")}if(t){if(h&&!_)return;c&&n>=p?i.data("carousel_settings").loop&&o.navigateToSlide(0):"post"==i.data("widget")&&"undefined"==i.data("carousel_settings").theme&&u>=r?(o.slick("slickSetOption","slidesToShow",r),o.slick("slickSetOption","slidesToScroll",r),o.navigateToSlide("slickNext")):n+u>p?(o.setSlideTo(p),o.navigateToSlide(null)):n%u!=0?(o.slick("slickSetOption","slidesToScroll",u+1),o.navigateToSlide("slickNext"),o.slick("slickSetOption","slidesToScroll",u)):o.navigateToSlide("slickNext"),n!=p||i.data("carousel_settings").loop||a.find(".sow-carousel-next").addClass("sow-carousel-disabled").attr("aria-disabled","true")}else{let e=!1;if("post"===i.data("widget")?i.data("carousel_settings").loop&&0===n?(p=c?d:p,w=!c,o.navigateToSlide(p)):n<=u?o.navigateToSlide(0):e=!0:e=!0,e){o.navigateToSlide("slickPrev");const e=a.find(".sow-carousel-next");e.hasClass("sow-carousel-disabled")&&e.removeClass("sow-carousel-disabled").removeAttr("aria-disabled")}}l.dots&&"post"==i.data("widget")&&(i.find("li.slick-active").removeClass("slick-active"),i.find(".slick-dots li").eq(Math.ceil(i.find(".sow-carousel-items").slick("slickCurrentSlide")/u)).addClass("slick-active")),w&&e(sowb).trigger("carousel_load_new_items",[i,o,s])};if(!l.loop&&0==o.slick("slickCurrentSlide")){const e="ltr"==i.data("dir")?"previous":"next";i.parent().parent().find(".sow-carousel-"+e).addClass("sow-carousel-disabled").attr("aria-disabled","true")}i.parent().parent().find(".sow-carousel-previous, .sow-carousel-next").on("click touchend",(function(t,i){t.preventDefault(),e(this).hasClass("sow-carousel-disabled")||r(e(this).hasClass("sow-carousel-next"),i)})),l.dots&&(i.data("variable_width")||i.data("carousel_settings").theme)&&(i.find(".slick-dots li").off("click.slick"),i.find(".slick-dots li").on("click touchend",(function(e){i.carouselDotNavigation(e)})),e(sowb).on("carousel_posts_added",(function(t,i){const o=e(i),a=o.find(".slick-dots li");a&&a.off("click touchend").on("click touchend",(function(e){o.carouselDotNavigation(e)})),s(o.find(".sow-carousel-items.slick-initialized"),o.data("carousel_settings"))})))})),e(sowb).trigger("carousel_setup"),e(document).on("keydown",".sow-carousel-navigation a",(function(t){13!=t.keyCode&&32!=t.keyCode||(t.preventDefault(),e(this).trigger("click"))})),e(document).on("keyup",".sow-carousel-item",(function(t){if(13==t.keyCode&&e(this).find("h3 a")[0].click(),37==t.keyCode||39==t.keyCode){var i=e(this).parents(".sow-carousel-wrapper"),s=i.find(".sow-carousel-items"),o=s.find(".sow-carousel-item").length,a=e(this).data("slick-index"),l=o-(o===i.data("item_count")?0:1);if(37==t.keyCode)--a<0&&(a=l);else if(39==t.keyCode&&++a>=l){if(i.data("fetching"))return;i.parent().find(".sow-carousel-next").trigger("click",!0)}s.navigateToSlide(a),i.find(".sow-carousel-item").prop("tabindex",-1),i.find('.sow-carousel-item[data-slick-index="'+a+'"]').trigger("focus").prop("tabindex",0)}}));const i=function(){const t=e(this),i=t.find(".sow-carousel-items.slick-initialized");if(!i.length)return;const s=t.data("responsive"),o=t.data("carousel_settings");[{query:`(min-width: ${s.tablet_landscape_breakpoint}px)`,show:s.desktop_slides_to_show,scroll:s.desktop_slides_to_scroll},{query:`(min-width: ${s.tablet_portrait_breakpoint}px) and (max-width: ${s.tablet_landscape_breakpoint}px) and (orientation: landscape)`,show:s.tablet_landscape_slides_to_show,scroll:s.tablet_landscape_slides_to_scroll},{query:`(min-width: ${s.mobile_breakpoint}px) and (max-width: ${s.tablet_portrait_breakpoint}px)`,show:s.tablet_portrait_slides_to_show,scroll:s.tablet_portrait_slides_to_scroll},{query:`(max-width: ${s.mobile_breakpoint}px)`,show:s.mobile_slides_to_show,scroll:s.mobile_slides_to_scroll}].some(e=>!!window.matchMedia(e.query).matches&&(i.slick("slickSetOption","slidesToShow",e.show),i.slick("slickSetOption","slidesToScroll",e.scroll),!0)),i.data("adaptive_height")&&window.requestAnimationFrame(()=>{i.adaptiveHeight(),"cards"!==o.theme||o.dynamic_navigation||i.fixContainerHeight()})};let o;e(window).on("resize load",()=>{clearTimeout(o),o=setTimeout(()=>{e(".sow-carousel-wrapper").each(i)},100),e(".sow-carousel-item:first-of-type").prop("tabindex",0)}).trigger("resize")},sowb.setupCarousel(),e(sowb).on("setup_widgets",sowb.setupCarousel)})),window.sowb=sowb;