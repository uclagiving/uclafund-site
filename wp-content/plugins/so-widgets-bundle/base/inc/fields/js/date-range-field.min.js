!function(e){e(document).on("sowsetupformfield",".siteorigin-widget-field-type-date-range",(function(t){var n=e(this),i=n.find('input[type="hidden"][class="siteorigin-widget-input"]');if(!n.data("initialized")){if(n.find('[class*="sowb-specific-date"]').length>0){var a=function(e,t){var a=n.find("."+e+"-picker"),r=function(e,t){if(!isNaN(e.valueOf())){var n=e.getDate();n=n<10?"0"+n.toString():n.toString();var i=e.getMonth()+1;return i=i<10?"0"+i.toString():i.toString(),e.getFullYear()+"-"+i+"-"+n}return""},l=function(e,t){var n=e.split("-"),i=parseInt(n[2]),a=parseInt(n[1])-1,r=parseInt(n[0]);return new Date(r,a,i)},s=function(t){var n=""===i.val()?{}:JSON.parse(i.val());n[e]=r(t),a.val(n[e]),i.val(JSON.stringify(n)),i.trigger("change",{silent:!0})},f=new Pikaday({field:a[0],blurFieldOnSelect:!1,toString:r,parse:l,onSelect:s});return a.on("change",(function(e){var t=l(a.val());return s(t),e.preventDefault(),!1})),t&&a.val(t),f}.bind(this),r=""===i.val()||"null"===i.val()?{after:"",before:""}:JSON.parse(i.val()),l=a("after",r.after),s=a("before",r.before);i.on("change",(function(e,t){if(!t||!t.silent){var n=""===i.val()||"null"===i.val()?{after:"",before:""}:JSON.parse(i.val());l.setDate(n.after),s.setDate(n.before)}}))}else n.find(".sowb-relative-date").length>0&&n.find(".sowb-relative-date").each((function(){var t=e(this).data("name");e(this).on("change",function(){var n=""===i.val()?{}:JSON.parse(i.val());n.hasOwnProperty(t)||(n[t]={}),n[t].value=e(this).find("> input").val(),n[t].unit=e(this).find("> select").val(),i.val(JSON.stringify(n)),i.trigger("change",{silent:!0})}.bind(this)),i.on("change",function(n,a){if(!a||!a.silent){var r=""===i.val()?{from:{},to:{}}:JSON.parse(i.val());r.hasOwnProperty(t)&&(e(this).find("> input").val(r[t].value),e(this).find("> select").val(r[t].unit))}}.bind(this))}));n.data("initialized",!0)}}))}(jQuery);