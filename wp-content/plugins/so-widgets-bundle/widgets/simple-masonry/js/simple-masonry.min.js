var sowb=window.sowb||{};jQuery((function(i){sowb.setupSimpleMasonries=function(){var t=i(".sow-masonry-grid");if(t.data("initialized"))return t;var a=function(){t.each((function(){var a=i(this),e=a.data("layouts"),o=window.matchMedia("(max-width: "+e.tablet.breakPoint+"px)"),n=window.matchMedia("(max-width: "+e.mobile.breakPoint+"px)"),s=e.desktop;n.matches?s=e.mobile:o.matches&&(s=e.tablet);var r=s.numColumns;a.css("width","auto");var d=s.gutter*(r-1),m=(a.width()-d)/r;a.width(m*r+d),a.imagesLoaded((function(){a.find("> .sow-masonry-grid-item").each((function(){var t=i(this),a=t.data("colSpan");a=Math.max(Math.min(a,s.numColumns),1),t.width(m*a+s.gutter*(a-1));var e=t.data("rowSpan");e=Math.max(Math.min(e,s.numColumns),1);var o=s.rowHeight||m;t.css("height",o*e+s.gutter*(e-1)+"px");var n=t.find("> img,> a > img"),r=!1;if(t.find(".image-title")){var d=parseInt(t.find(".image-title").outerHeight());isNaN(d)||(o+=d,t.find(".sow-masonry-grid-image").css("height","calc( 100% - "+d+"px)"),r=!0)}n.css("height",r?t.height()-d:t.height()+"px")})),a.packery({itemSelector:".sow-masonry-grid-item",columnWidth:m,gutter:s.gutter,originLeft:a.data("layout-origin-left"),transitionDuration:0}),t.prev(".sow-masonry-grid-preloader").length&&(t.prev().hide(),t.css("opacity",1))}))}))};i(window).on("load resize panelsStretchRows",a).trigger("resize"),setTimeout((function(){a()}),100),t.data("initialized",!0)},sowb.setupSimpleMasonries(),i(sowb).on("setup_widgets",sowb.setupSimpleMasonries)})),window.sowb=sowb;